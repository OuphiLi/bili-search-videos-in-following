# FollowingListOfBili
---
## 项目说明
#### 下载b站页面关注列表的所有uid，可通过按F12并在console查看。
#### 可以和 “MatchedFollowingVideosOfBili” 联用，实现从关注列表的视频中搜索。

---

## 操作说明
####
* 点击关注列表左上角的下载按钮。
* F12，打开console查看uid数组信息。
* 在读取期间，下载按钮不可点击；读取成功后，可重复点击。

---
## 代码说明
### 架构介绍
##### 
* 没有js基础，所以代码都是c风格，有一些函数可能写麻烦了。
* 想要得到定时检查页面元素的效果，又不阻塞页面的加载。所以使用了setTimeout，是类似于汇编代码的架构。

### 架构分析
###
* run函数是用来控制整个流程的。其中每次循环跳转、等待加载，都封装成了run\_1-run\_n的函数，根据flag跳转
* run0是等待页面加载的函数，每隔固定时间检查一次
* 具体的结构，可以根据当前flag的值，与下一个run函数的flag，画出流程图/有限状态机，即可清晰了解

### 自定义内容
#### 对于需要个性化的内容，此处提供了修改流程
* 下载文件：更改函数downloadFile(212行)， 修改元素类型为a，将属性href设为data类型，最后click
* 固定下载页面：更改全局变量href的定义(26行)， 删去后续对页面href的读取(init函数，44行)
* 在页末显示结果：更改信息元素p的属性，将display设为"block"(downloadFile函数，224行)

### bug反馈
####
* F12查看console，找到无重复flag的最后一项。
* 保存该项及前5项的显示信息，对相应flag的run函数添加各个元素的显示注释。
* 复现问题，读取到各个位置时函数内的元素状态，并分析。
* 将上述操作截图/复制并反馈。